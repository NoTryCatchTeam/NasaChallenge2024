import*as t from"./_snowpack/pkg/three.js";let y=[];export function initObservatoriesData(l,s){const d=Math.PI*1.5,e=Math.PI,o=new t.Object3D;s.Planet.add(o);const a=new t.Object3D;o.add(a);const r=new t.Object3D;r.position.z=s.getPlanetRadius(),a.add(r);const c=[{name:"La Silla Observatory",lat:-29.25627,long:-70.73805},{name:"Subaru Observatory",lat:19.8255556,long:-155.4761111}];for(const n of c){const{lat:p,long:b,name:g}=n;o.rotation.y=t.MathUtils.degToRad(b)+d,a.rotation.x=t.MathUtils.degToRad(p)+e,r.updateWorldMatrix(!0,!1);const u=r.getWorldPosition(new t.Vector3),i=document.createElement("div");i.textContent=g,l.appendChild(i),y.push({name:g,position:u,element:i})}}export function updateObservatoriesLabels(l,s,d){const e=new t.Vector3,o=d.Planet.getWorldPosition(new t.Vector3);for(const a of y){const{name:r,position:c,element:n}=a,p=new t.Vector3().subVectors(o,s.position).normalize(),b=new t.Vector3().subVectors(c,o).normalize();if(p.dot(b)>-.5){n.style.display="none";continue}n.style.display="",e.copy(c),e.project(s);const u=(e.x*.5+.5)*l.clientWidth,i=(e.y*-.5+.5)*l.clientHeight;n.style.transform=`translate(-50%, -50%) translate(${u}px,${i}px)`,n.style.zIndex=((-e.z*.5+.5)*1e5|0).toString()}}
