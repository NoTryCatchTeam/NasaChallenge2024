import*as t from"./_snowpack/pkg/three.js";let d=[];export function addObservatoriesData(n){d=n}export function renderObservatories(n,a){const l=Math.PI*1.5,r=Math.PI,s=new t.Object3D;a.Planet.add(s);const i=new t.Object3D;s.add(i);const c=new t.Object3D;c.position.z=a.getPlanetRadius(),i.add(c);for(const e of d){s.rotation.y=t.MathUtils.degToRad(e.longitude)+l,i.rotation.x=t.MathUtils.degToRad(e.latitude)+r,c.updateWorldMatrix(!0,!1),e.position=c.getWorldPosition(new t.Vector3);const o=document.createElement("div");o.textContent=e.name,n.appendChild(o),e.element=o}}export function updateObservatoriesLabels(n,a,l){const r=new t.Vector3,s=l.Planet.getWorldPosition(new t.Vector3);for(const i of d){const{name:c,position:e,element:o}=i,p=new t.Vector3().subVectors(s,a.position).normalize(),u=new t.Vector3().subVectors(e,s).normalize();if(p.dot(u)>-.5){o.style.display="none";continue}o.style.display="",r.copy(e),r.project(a);const b=(r.x*.5+.5)*n.clientWidth,g=(r.y*-.5+.5)*n.clientHeight;o.style.transform=`translate(-50%, -50%) translate(${b}px,${g}px)`,o.style.zIndex=((-r.z*.5+.5)*1e5|0).toString()}}export class Observatory{}
