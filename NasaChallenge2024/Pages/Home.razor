@page "/"
@inject IJSRuntime JsRuntime

<PageTitle>Main</PageTitle>

<div class="user-panel">
    <button class="vr-button">
        <div class="vr"><img class="visor" src="images/visor.svg" alt="visor" />VR Mode</div>
    </button>
    <div id="ui-switch">
        <label class="ui-text">UI</label>
        <label class="switch">
            <input type="checkbox" checked="@isUIChecked" @oninput="UICheckboxChanged">
            <span class="slider"></span>
        </label>
    </div>
    <div class="user">
        MISTER TURBO
        <div class="progress-bar-container">
            <div class="progress-bar-indicator" style="width:60%"></div>
        </div>
    </div>
    <div class="avatar">
        <img src="images/avatar.svg" alt="avatar" />
        <div class="score">654</div>
    </div>
</div>

<div class="menu @UIVisibility">
    <button class="menu-item" autofocus><img class="starFour" src="images/starFour.svg" alt="starFour" />Main</button>
    <button class="menu-item"><img class="planet" src="images/planet.svg" alt="planet" />Planets</button>
    <button class="menu-item"><img class="flyingSaucer" src="images/flyingSaucer.svg"
            alt="flyingSaucer" />Observatories</button>
</div>




<div class="bottom-panels @UIVisibility">
    <div class="bottom-panels-item"></div>
    <div class="bottom-panels-item"></div>
    <div class="bottom-panels-item"></div>
</div>


@code
{
    private IJSObjectReference _mainJsModule;

    [Parameter]
    public bool IsUIChecked { get; set; } = true;
    private bool isUIChecked;
    private string UIVisibility;

    protected override void OnParametersSet()
    {
        isUIChecked = this.IsUIChecked;
    }
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender)
        {
            return;
        }

        _mainJsModule = await JsRuntime.InvokeAsync<IJSObjectReference>("import", "./js/main.js");
        await _mainJsModule.InvokeVoidAsync("hello");
    }

    private void UICheckboxChanged(ChangeEventArgs e)
    {
        var value = e.Value;
        this.UIVisibility = (bool)value==false ? "invisible" : string.Empty;
    }
}